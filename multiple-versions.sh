#!/usr/bin/env bash
set -Eeuo pipefail

[ -z "${PROGDIR-}" ] && readonly PROGDIR=$(readlink -m "$(dirname "$0")")

versions=("5.7.2" "5.8")

for version in "${versions[@]}"; do
    echo "WordPress v${version}"
    echo "  Downloading"
    wget -o /dev/null https://wordpress.org/wordpress-"${version}".zip
    mv wordpress-"${version}".zip latest.zip > /dev/null
    echo "  Generating hashes-${version}.php"
    php "${PROGDIR}"/hashes-generator.php > "${PROGDIR}"/hashes-"${version}".php
    echo "  Cleaning up"
    rm "${PROGDIR}"/latest.zip
done

echo "All finished"
